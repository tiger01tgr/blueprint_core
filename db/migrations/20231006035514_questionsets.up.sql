BEGIN;

CREATE TABLE IF NOT EXISTS Industries (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name TEXT NOT NULL,
    UNIQUE (id),
    UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS Employers (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name TEXT NOT NULL,
    logo TEXT NOT NULL,
    industryId BIGINT NOT NULL,
    created_at TIMESTAMP NOT NULL,
    deleted BOOLEAN NOT NULL,
    UNIQUE (id),
    UNIQUE (name),
    FOREIGN KEY (industryId) REFERENCES Industries(id)
);

CREATE TABLE IF NOT EXISTS QuestionSets (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    employerId BIGINT NOT NULL,
    role TEXT NOT NULL,
    interviewType TEXT NOT NULL,
    questions BIGINT[] NOT NULL,
    created_at TIMESTAMP NOT NULL,
    deleted BOOLEAN NOT NULL,
    UNIQUE (id),
    FOREIGN KEY (employerId) REFERENCES Employers(id)
);

CREATE TABLE IF NOT EXISTS Questions (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    questionSetId BIGINT NOT NULL,
    text TEXT NOT NULL,
    timelimit BIGINT NOT NULL,
    deleted BOOLEAN NOT NULL,
    UNIQUE (id),
    FOREIGN KEY (questionSetId) REFERENCES QuestionSets(id)
);

COMMIT;
